version: '1.0'
name: mcp-image-analysis4puzzle
description: MCP server for analyzing mathematical puzzles using Gemini 2.5 Pro

build:
  docker:
    file: Dockerfile
    context: .
    args: {}

run:
  ports:
    - "5000:5000"
  environment:
    - GEMINI_API_KEY
    - PORT=5000
    - HOST=0.0.0.0
    - LOG_LEVEL=INFO
  volumes:
    - type: bind
      source: .env
      target: /app/.env
      read_only: true

health:
  port: 5000
  path: /health
  interval: 30s
  timeout: 10s
  retries: 3

dependencies:
  python: ">=3.11"
  packages:
    - google-generativeai>=0.3.0
    - fastmcp>=0.1.0
    - Pillow>=10.0.0
    - python-dotenv>=1.0.0
    - requests>=2.31.0
    - typing-extensions>=4.8.0
    - uvicorn>=0.24.0
    - pydantic>=2.4.2
    - python-multipart>=0.0.6

development:
  setup:
    - pip install -r requirements.txt
  scripts:
    start: python -m fastmcp dev server.py
    test: python -m pytest tests/
    lint: flake8 .
    format: black .

documentation:
  - README.md
  - docs/ 